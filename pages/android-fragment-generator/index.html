<!doctype html>
<html ng-app="FragmentGenerator">
  <head>
    <script src="http://code.angularjs.org/1.2.10/angular.min.js"></script>
    <script src="fragment-generator.js"></script>

<!--
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">-->
    <link href="../../css/bootstrap.min.css" rel="stylesheet">
    <link href="../../css/freelancer.css" rel="stylesheet">
    <link href="../../font-awesome-4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!--<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">-->
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>

    <!--<script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>-->
    
    <!-- start Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    
      ga('create', 'UA-48681711-3', 'auto');
      ga('send', 'pageview');
    
    </script>
    <!-- end of Google Analytics -->
  </head>
  <body>
     
    <!-- Header -->
    <header>
        <div class="container-small-padding">
            <div class="row">
                <div class="col-lg-12">
                    <div>
                      <h1>Android Fragment Code Generator</h1>
                    </div> 
                    <div class="intro-text">
                        A simple boilerplate code generator for Android Fragments
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div ng-controller="FragmentGeneratorController as fragmentGenerator">
    
      <form role="form" class="form-horizontal" >
        <!-- package input -->
        <div class="form-group" style="padding-top:12px">
          <label for="inputPackage" class="col-sm-4 control-label">Package</label>
          <div class="col-sm-4">
            <input type="string" class="form-control" id="inputPackage" ng-model="package" required placeholder="com.example">
          </div>
        </div>

        <!-- class name input -->
        <div class="form-group" style="padding-top:12px">
          <label for="inputClassName" class="col-sm-4 control-label">Class</label>
          <div class="col-sm-4">
            <input type="string" class="form-control" id="inputClassName" ng-model="className" required placeholder="MyFragment">
          </div>
        </div>

        <!-- layout -->
        <div class="form-group" style="padding-top:12px">
          <label for="inputLayout" class="col-sm-4 control-label">Layout</label>
          <div class="col-sm-4">
            <input type="string" class="form-control" id="inputLayout" ng-model="layout" required placeholder="layout.xml">
          </div>
        </div>

        <!-- argument inputs -->
        <div ng-repeat="argument in fragmentArguments" class="form-group padding-top:12px">
          <label for="inputArgument{{$index}}" class="col-sm-4 control-label">Argument:</label> 
          <div class="col-sm-2">
            <input type="string" ng-model="argument.name" 
                   class="form-control" id="inputArgument{{$index}}" 
                   placeholder="arg{{$index+1}}"
                   autofocus>
          </div>
          <div class="col-sm-2">
            <select class="form-control" ng-model="argument.argType" ng-options="argType.name for argType in argTypes">
            <option value="">-- choose type --</option>
            </select>
          </div>
          <div class="col-sm-1">
            <a  href ng-click="fragmentArguments.splice($index, 1)" class="label label-danger">X</a>
          </div>
        </div>

        <!-- add argument button -->
        <div class="form-group col-lg-12 text-center" style="padding-top:12px">
          <a href ng-click="addArgument()" class="btn btn-default">Add argument</a>
        </div>

      </form>


      <!-- code section -->
      <div class="row" style="padding-top:12px">
      
        <div class="col-md-2"></div>
        <div class="col-md-8">
          <pre>
<code>
package {{package}};

import android.app.Fragment; // or import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.os.Bundle;

<!-- begin class -->public class {{className}} extends Fragment {
  <!-- begin constants --><span ng-show="fragmentArguments.length"><br/>  private static final String KEY_PREFIX = "{{package}}.{{className}}.";</span>
  <!-- arg key constants --><span ng-repeat="argument in fragmentArguments"><br/>  private static final String ARG_{{argument.name|uppercase}}_KEY = KEY_PREFIX + "{{argument.name|lowercase}}-key";</span>
  <!-- begin instance static method -->
  public static {{className}} getInstance({{argumentList}}) {
    <!-- call empty constructor -->{{className}} fragment = new {{className}}();
    <!-- create bundle -->
    <span ng-show="fragmentArguments.length">Bundle bundle = new Bundle();
      <span ng-repeat="argument in fragmentArguments">
    bundle.put{{argument.argType.name}}(ARG_{{argument.name|uppercase}}_KEY, {{argument.name}});
      </span>
    fragment.setArguments(bundle);
    </span>
    return fragment;
  }
  <!-- end instance static method -->
  <!-- onCreateView --><span ng-show="layout">@Override
  public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.{{layout|lowercase|stripExtension}}, null);

    return view;
  }
  </span>
  <span ng-repeat="argument in fragmentArguments">
  private {{argument.argType.qualifiedName}} get{{argument.name|capitalize}}() {
    return getArguments().get{{argument.argType.name}}(ARG_{{argument.name|uppercase}}_KEY);
  }
  </span>
}
<!-- end class -->

</code>
        </pre>
        </div>
        <div class="col-md-2"></div>
      </div>
      <!-- end of code section -->

    </div>

  </body>
</html>
